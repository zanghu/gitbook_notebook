## Python: 逻辑运算符and和or的返回值

参考资料：[深入分析python的and or 返回值](https://www.jianshu.com/p/d4059a76a7a3)

### 0.问题引出

最近在参考CTW数据集基准方案代码`ctw-baseline`时，看到了以下源码：

```python
    ...
    # 注意下面一行代码中字典的'text'键的值
    a.append({'bbox': bbox, 'text': text or '■', 'color': colormap[taken]})
    ...
```

上面代码很明显是将表达式`text or '■'`赋值给字典的''text'键。

按照之前的理解，逻辑表达式都返回一个布尔值，但是这里'text'键的值显然应该是一个字符串（CTW样本中一个bbox的中文类标），这说明与之前对`or`和`and`的理解是错的。

### 1.分析与结论

在Python 中，and 和 or 执行布尔逻辑演算，如你所期待的一样，但是它们并不返回布尔值；而是，返回它们实际进行比较的值之一。

- **and**

>>> 'a' and 'b'
'b'
>>> '' and 'b'
''
>>> 'a' and 'b' and 'c'
'c’
在布尔上下文中从左到右演算表达式的值，如果布尔上下文中的所有值都为真，那么 and 返回最后一个值。
如果布尔上下文中的某个值为假，则 and 返回第一个假值

- **or**

>>> 'a' or 'b'
'a'
>>> '' or 'b'
'b'
>>> '' or [] or {}
{}
>>> 0 or 'a' or 'c'
'a’
使用 or 时，在布尔上下文中从左到右演算值，就像 and 一样。如果有一个值为真，or 立刻返回该值
如果所有的值都为假，or 返回最后一个假值
注意 or 在布尔上下文中会一直进行表达式演算直到找到第一个真值，然后就会忽略剩余的比较值

作者：PyChina
链接：https://www.jianshu.com/p/d4059a76a7a3
來源：简书
简书著作权归作者所有，任何形式的转载都请联系作者获得授权并注明出处。

