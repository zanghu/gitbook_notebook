## Linux Kernel: 双向链表 LIST_HEAD

参考资料：深入理解Linux内核（第三版）

参考资料：[linux 内核宏container_of剖析](https://zhuanlan.zhihu.com/p/54932270)

### 1.结构定义

`Linux`的双向链表的节点定义非常简单

```c
struct list_head {
    struct list_head *next, *prev;
};
```

这一链表的奇妙之处在于，该链表没有一般数据结构教材中介绍的、用于承载数据的`data`成员，其承载数据的方式是将每个`list_node`对象“埋入”一个数据对象中（典型的比如作为`task_struct`对象的一个成员），通过一种“内核黑客”的方式（具体实现是利用了`container_of`宏函数）实现了根据每个`list_node`对象的地址来找到其所“埋入”的宿主（`task_struct`）对象的地址。

链表“埋入”的示意图：

![](/assets/lin101_001.PNG)

