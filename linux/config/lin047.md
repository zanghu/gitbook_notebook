## Linux: 配置DNS（适用于Ubuntu）

参考资料：[清华大学IPV6 DNS](https://tuna.moe/help/dns/)

参考资料：[解决ubuntu下DNS配置重启失效](http://www.361way.com/ubuntu-dns-resolvconf/3637.html)

### 设置dns

#### 方案一：直接修改DNS配置文件（存在严重缺陷：会自动失效）

* 打开配置文件
```shell
sudo cp  /etc/resolv.conf   /etc/resolv.con.fbak    # 备份原有dns配置文件
sudo vim  /etc/resolv.conf   # 编辑配置文件,添加以下内容
```

* 添加以下内容
```shell
nameserver 101.6.6.6   # 设置首选dns
nameserver 2001:da8::666 # 设置备用dns
# 保存配置并退出
```
>note
>（1）清华IPV6 DNS： 请将系统网络设置中 DNS 项修改为 101.6.6.6 和 2001:da8::666
>（2）实践中用该方法修改后，立即测试确认DNS修改成功，但一段时间后（即使没有重启系统）就会发现/etc/resolv.conf中的内容自动变回原样。

#### 方案二：简介修改DNS配置文件

先说说为什么直接修改`/etc/resolv.conf`每次重启会清理掉，查看该文件会发现如下两条注释：
```shell
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
```
上面已经说的非常清晰明了了。

* 解决方法

第一步：/etc/network/interfaces中添加一行DNS信息
```shell
dns-nameservers 8.8.8.8
```
或者：编辑`/etc/resolvconf/resolv.conf.d/bas`e文件，加入DNS信息
```shell
nameserver 8.8.8.8
```

第二步：增加完DNS信息后，执行下面的命令生效
```shell
# sudo resolvconf  -u
```
执行完该命令后，查看`/etc/resovle.conf`文件，会发现其DNS信息，就是我们刚刚在方法一或方法二中写的DNS信息。

