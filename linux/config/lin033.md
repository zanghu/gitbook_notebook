## Linux: 创建新用户

### 1.创建用户

添加一个新用户，注意执行下面的操作前应先`su -`切换至root账户，如果使用`sudo`执行下面的命令，那么创建出的目录都是只有sudo用户才能修改。

```shell
# 切换至root
$ su -

# -d指明用户主目录
# -m指示自动创建
# 最后的jiayq是用户名
$ useradd -d /home/jiayq -m jiayq
```

### 2.配置密码

没有配置密码的用户无法通过普通用户切换，只能通过root用户切换，因此应尽快为新用户配置密码。

```shell
# passwd <用户名>
$ passwd jiayq
```

### 3.切换用户

切换用户时注意使用新用户环境变量：

```shell
$ su - jiayq # 不能遗漏短横线
```

### 4.配置用户组

#### 4.1.Linux用户组基础

Linux系统中用户组与用户之间的关系是多对多的，即一个用户可以属于多个用户组，一个用户组可以包含多个用户。

* **用户组的基本查询命令**

```shell
$ groups <用户名> # 显示用户所属用户组
$ cat /etc/group # 显示系统内所有用户组和每个用户组拥有的用户
```

* **基本组与附加组**

**基本组**：创建用户的时候系统会同时创建一个和这个用户名同名的组，这个组就是基本组，不可以把用户从基本组中删除。

**附加组**：除了基本组之外，用户所在的其他组，都是附加组。用户是可以从附加组中被删除的。

一个用户可以属于多个附加组。但是一个用户只能有一个基本组。一个孩子诞生了，他的基本组就是亲生父母；他的附加组就是其他的干爹干妈。就这个意思。

* **Ubuntu用户默认组**

默认情况下Ubuntu（以10.04为例）创建的用户是自动添加到以下这些组的，
adm dialout cdrom plugdev lpadmin sambashare admin

dialout（拨号）
cdrom（光驱）
plugdev（U盘等）
lpadmin（打印机）
sambashare（smb共享）
admin（现在似乎编程是sudo，这个就不解释了）
adm（干嘛的？因为以前的/var/adm就是现在的/var/log，作用是作为非root用户时，该组用户可以查看log）

如果新用户没有在上面的组中，可以手动添加。

#### 4.2.配置用户的用户组

推荐使用`usermod`命令配置用户组

```shell
# 将一个用户一次添加进多个用户组，不同用户组的名称之间用逗号分隔
# -G指明用户组名称
# -a保留用户之前的所有组，否则用户会被从原有用户组中去除
$ usermod -a -G <用户组1>,<用户组2>,...,<用户组N> <用户名>
```



