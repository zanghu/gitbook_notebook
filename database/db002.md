## 数据库自增主键

[腾讯云：为什么要用自增主键？](https://cloud.tencent.com/developer/article/1462758)
[知乎：使用自增主键是否总是最佳实践？](https://www.zhihu.com/question/27603761)
[cnblogs: 杂谈自增主键用完了怎么办](https://www.cnblogs.com/rjzheng/p/10669043.html)


阅读项目的数据库设计代码时，发现某个表的某主键的说明是：自增主键



### 1.概念

笔者遇到的场景为：维护商业账号的资质相关信息。账号是由全局唯一且自增的分布式ID生成器生成的，很显然这个时候我们把账号作为主键这就天然合理。于是，初版建表的时候就有了如下表结构:

```
accountId // 主键, 账号ID,全局唯一
cert // 该账号的资质
review_detail // 该账号的审核详情
cert_photo // 资质的图片
```

### 2.水平切分与垂直切分

分片（Sharding）是一种与水平切分（horizontal partitioning）相关的数据库架构模式——将一个表里面的行，分成多个不同的表的做法（称为分区）。每个区都具有相同的模式和列，但每个表有完全不同的行。同样，每个分区中保存的数据都是唯一的，并且与其他分区中保存的数据无关。

从水平切分（horizontal partitioning）与垂直切分（vertical partitioning）的关系，可能会有所帮助。在垂直切分表中，所有的列被分离出来，并放入新的不同的表中。每个垂直切分内的数据，独立于所有其他分区中的数据，并且每个分区都包含不同的行和列。

下图说明了如何在水平和垂直方向上对表进行分区：

![](/assets/db001_01.jpg)