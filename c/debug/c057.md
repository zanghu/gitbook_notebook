## Linux提供的backtrace函数打印当前堆栈

### 1.介绍

Linux提供下面三个函数用于获取当前程序堆栈

```c
SYNOPSIS
       #include <execinfo.h>

       int backtrace(void **buffer, int size);

       char **backtrace_symbols(void *const *buffer, int size);

       void backtrace_symbols_fd(void *const *buffer, int size, int fd);
```

`backtrace`: 返回函数调用链每个函数的地址，不包含函数名；

`backtrace_symbols`: 将`backtrace`返回的结果解析为函数名和偏移量，注意返回的数组的最外层维是malloc分配的，需要用户手动释放。这也导致该函数不适用于在信号处理句柄中使用；

`backtrace_symbols_fd`: 效果类似于`backtrace_symbols`，但会将结果写入参数`fd`所指定的文件描述符；

### 2.举例



