## c99-style designated initializer

C90标准要求结构体对象或数组的初始化器（应是指对象创建时用花括号初始化方法）中的元素按照固定顺序出现，这个顺序对于结构体对象来说就是结构体属性成员的定义顺序，对于数组来说就是数组的元素顺序。

`ISO C99`标准中提供了一种允许用户在使用花括号`{}`初始化结构体对象或数组元素时，不需要严格按照结构体成员的定义顺序队成员进行赋值、也不需要按照数组元素的索引序对元素进行赋值的对象初始化方法。


* **情况1**: 

对于数组初始化，可以使用下面例子中的方式明确指定初始化值赋给数组的那个元素。

```c
// 花括号中每个等号表达式左侧方括号内的索引必须是常量表达式，
// 即便数组是自动（猜想应该是指数组大小是自动初始化的，即int a[]=...）初始化的
int a[6] = { [4] = 29, [2] = 15 };
```

上面的初始化式等价于

```c
int a[6] = { 0, 0, 15, 0, 29, 0 };
```

* **情况2**：

对于结构体初始化器，在花括号内部通过‘.fieldname = ’的方式指明每个要赋值的属性成员的名字来对制定属性赋值。

```c
struct point { int x, y; };
```

可以按照如下方式初始化

```c
struct point p = { .y = yvalue, .x = xvalue };
```

上面的代码等价于

```c
struct point p = { xvalue, yvalue };
```

这一新特性可以与之前的初始化方法混用，即初始化表达式花括号内的一部分元素用`c99-style designated initializer`，而另外一部分仍使用传统的方式。举例来说：

```c
int a[6] = { [1] = v1, v2, [4] = v4 };
```

上面的初始化语句等价于

```c
int a[6] = { 0, v1, v2, 0, v4, 0 };
```

* **情况3**：

当被初始化的数组的索引下表是枚举类型时，`c99-style designated initializer`的初始化方式将变得特别有用。举例来说:

```c
int whitespace[256]
  = { [' '] = 1, ['\t'] = 1, ['\h'] = 1,
      ['\f'] = 1, ['\n'] = 1, ['\r'] = 1 };
```

* **情况4**：

当数组元素是自定义结构体对象时，可以用如下方法：

```c
// 数组元素是上面例子中的struct point
struct point ptarray[10] = { [2].y = yv2, [2].x = xv2, [0].x = xv0 };
```


