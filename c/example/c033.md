## C: DNS域名解析

参考资料：[https://blog.csdn.net/jctian000/article/details/81912346](https://blog.csdn.net/jctian000/article/details/81912346)

### 1.日志宏

```c
#include "simple_wr.h"

/**
 * @brief 将日志消息以追加模式写入当前目录下的log.txt文件
 */
#define WRITE_LOG(...) \
{ \
    char buf[512]; \
    if (snprintf(buf, 512, __VA_ARGS__) >= 512) { \
        fprintf(stderr, "LOG BUFFEROVERFLOW\n"); \
    } \
    if (writeStringToPath("log.txt", buf, "a") != 0) { \
        fprintf(stderr, "WRITE_LOG failed, error.\n"); \
    } \
}

/*
 * @brief 将字符串写入到指定路径的文件
 */
int writeStringToPath(const char *file_path, const char *msg, const char *mode)
{
    CHK_NIL(file_path);
    CHK_NIL(msg);
    CHK_NIL(mode);

    int error = 0;

    FILE *fp = NULL;
    CHK_NIL((fp = fopen(file_path, mode)));
    error = writeStringToFileSimple(fp, msg);
    CHK_ERR(fclose(fp));

    if (error != 0) {
        ERROR_MSG_1("写入文件 %s 失败, error.\n", file_path);
        return RAISE_ERROR();
    }

    return 0;
}

```