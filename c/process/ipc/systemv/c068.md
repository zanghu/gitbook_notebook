## C: IPC——SystemV共享内存之shmat返回地址的对齐问题

* **问题来源**

多个进程共用一块共享内存并共用其中数据，共享内存中的数据包括结构体对象以及结构体的操作函数（就好像面向对象语言中类和它的方法）。

由于每个进程连接到共享内存后，共享内存映射到进程的逻辑地址（起始点，也就是共享内存的地址最低位置）是不同的，因此此结构体的操作函数中不可避免地要进行内存地址重新计算（所有地址都加上一个偏移量）。

但是除此之外，由于结构体操作函数中可能还包含有指针转换的操作，而按照C标准，指针除了与`void *`类型相互转换是安全可逆的之外，其他情况下应保证指针地址对于转换前后的类型都是**内存对齐**的，而在任意一个关联该共享内存进程中这种内存对齐要求是否能满足显然与`shmat`返回的地址值是否是对齐的、对齐于何值紧密相关。






