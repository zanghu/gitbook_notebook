## C: 进程间通讯——共享内存

参考资料：APUE 15.6 & 15.9

### 1.POSIX进程间通讯

进程间通讯（Inter-Process Communication）简称IPC，APUE中讨论的五种UNIX下经典IPC方式包括：

| 名称 | 介绍| 备注 |
| :-:| :-: | :-: |
| 管道 | 最古老的IPC形式，所有UNIX系统都支持 | 一般是半双工的；通讯的两个进程必须是相关的（具有公共祖先） |
| FIFO | 有时也称为命名管道 | |
| 消息队列 | XSI IPC | |
| 信号量 | XSI IPC | |
| 共享存储 | XSI IPC | |

需要注意的是，以上五种IPC形式仅限于同一主机上的两个不同进程间IPC，不适用于不同主机上的两个进程IPC

### 2.共享内存

* **原理**

  两个进程分别将同一组物理内存页“挂载”到各自的逻辑内存空间，两个进程在读写各自逻辑地址空间的共享内存地址区域时，实际上是在读写同一块物理地址空间。
  
* **优势**

  （1）操作简单。读写共享内存的操作和读写进程其他内存没有本质区别；
  （2）速度快。共享内存是运行速度最快的IPC方式。
  
* **速度快的原因**

  原因如下：

  （1）无需系统调用。由于共享内存挂载于进程的用户空间，因此除了在初始申请共享内存的那一次系统调用外，后续对这部分地址空间的操作无需进入内核；
  
  （2）避免重复写入。与管道、套接字、域套接字等方法相比，进程的每次写入和读取操作都直接作用在目标内容上，无需经过额外的缓冲区环节。





