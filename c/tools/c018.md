## pkg-config工具

参考资料: [Linux下如何用/proc命令查找进程状态信息——当前目录，内存占用，描述符等](https://blog.csdn.net/juzihongle1/article/details/77184541)

### 1.使用pkg-config链接OpenCV库 

使用以下命令：

```shell
$ gcc -g -Wall test.c `pkg-config --cflags --libs opencv` --std=c++11 -o Test
```

上面命令中的\`pkg-config --cflags --libs opencv\`含义是在shell中执行：

```shell
$ pkg-config --cflags --libs opencv
```

之后将shell输出结果字符串替换之前的编译命令中pkg-config的部分。

### 2.pkg-config介绍

pkg-config程序是干什么用的？简单的说就是向用户向程序提供相应库的路径、版本号等信息的程序。

pkg-config  查看opencv的头文件搜索目录和链接库参数：

```shell
$ pkg-config --libs --cflags opencv
```

会显示如下信息：

```shell
-L/usr/local/lib -lopencv_shape -lopencv_stitching -lopencv_objdetect -lopencv_superres -lopencv_videostab -lippicv -lopencv_calib3d -lopencv_features2d -lopencv_highgui -lopencv_videoio -lopencv_imgcodecs -lopencv_video -lopencv_photo -lopencv_ml -lopencv_imgproc -lopencv_flann -lopencv_core 
```
各位看官，你看这不就是我们用gcc编译连接时CFLAGS的参数吗？
因此当我们需要编译连接某个库时，我们只需要把上面那行加入gcc 的参数里面即可。
这也是configure的作用，它会检查你需要的包，产生相应的信息。
那pkg-config从哪儿知道这些信息的呢？它是从包名为xxx.pc这个文件中查找到的。拿上面那个例子说，它是从opencv.pc这个文件中查知的。
那pkg-config 又怎么会知道opencv.pc这个文件呢？
下面我们看一下pkg-config是怎样工作的。
缺省情况下，pkg-config首 先在prefix/lib/pkgconfig/中查找相关包（譬如opencv）对应的相应的文件（opencv.pc）。在linux上上述路径名为 /usr/lib/pkconfig/。若是没有找到，它也会到PKG_CONFIG_PATH这个环境变量所指定的路径下去找。若是没有找到，它就会报 错，例如：
Package opencv was not found in the pkg-config search path.
Perhaps you should add the directory containing `opencv.pc'
to the PKG_CONFIG_PATH environment variable
No package 'opencv' found