## C: valgrind常见用法总结

[valgrind官方网站](http://valgrind.org/)

### 1.下载安装

目前最新版本是3.13.0

```shell
$ tar -jxvf valgrind-3.13.0.tar.bz2
$ cd valgrind-3.13.0
$ ./configure --prefix=/path/to/your/install/dir
$ make all -j8
$ make install
```

修改`~/.bashrc`文件，配置`PATH`环境变量，之后

```shell
$ source ~/.bashrc
```

### 2.内存问题检查

使用`memcheck`继续宁内存问题检查是最常用的检查，常见的检查命令

```shell
# 内存检查
$ valgrind --tool=memcheck --track-fds=yes --leak-check=full --show-leak-kinds=all --undef-value-errors=yes --track-origins=yes ./Test

# 打印日志
valgrind --tool=memcheck --track-fds=yes --leak-check=full --show-leak-kinds=all --undef-value-errors=yes --track-origins=yes --log-file=vcheck.log ./Test

# 打印XML日志
valgrind --tool=memcheck --track-fds=yes --leak-check=full --show-leak-kinds=all --undef-value-errors=yes --track-origins=yes --log-file=vcheck.log --xml-file=vcheck.xml --xml=yes ./Test
```