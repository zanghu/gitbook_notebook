## C: Linux环境动态库的产生历史

参考资料：[Can someone explain about Linux library naming?](https://stackoverflow.com/questions/663209/can-someone-explain-about-linux-library-naming)

### 1.动态库与共享库的产生

静态库的概念产生于汇编语言时代，动态库的概念被完全接受则要相对迟很多。

#### 1.1 资源共享需求

动态库的概念的出现和被接受与多任务操作系统的出现密不可分，因为在多任务操作系统时代，资源（在多任务间）共享才变得重要起来。

典型的共享资源包括键盘、鼠标、显卡、声卡、网卡等。如果每个想访问共享资源的应用程序都要包含访问资源的控制代码（源代码或静态库），那么系统会由于存储重复的代码而变得效率低下，同时会造成存储资源（内存和硬盘）的浪费。

更好更高效的资源共享机制于是呼之欲出。

#### 1.2 动态库发展历史

现代程序对于链接时机有三种选择：（1）构建期链接（静态链接）；（2）装载期链接（动态链接方式1）；（3）运行期链接（动态链接方式2）。

* **静态库**：典型的构建期链接；

* **早期动态库**：实现装载期链接. 硬盘上只存储一份库文件，每个用到该库的程序在运行启动时的装载期链接该库，每个程序的内存中都包含一份动态库的实体. 装载期链接解决了同一份库存储多次浪费硬盘空间的问题，但没有解决内存中同一份库重复存在浪费内存的问题。

这一代动态库的核心技术是装载时重定位（Load Time Relocation, LTR）

* **现代动态库**：实现运行期链接. 硬盘上之存储一份库文件，内存中也只有一份库文件实体，每个用到该动态库的程序在运行器通过运行期链接共享内存中的动态库。该方案同时解决了内存浪费和硬盘浪费。

这一代动态库的核心技术是位置无关代码（Position Independent Code, PIC），其实现依赖于虚拟内存技术，同时PIC技术又是现代多任务操作系统成功实现的基础。



