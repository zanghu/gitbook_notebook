## Linux: Ubuntu16.04安装caffe + CUDA9.1 + cuDNN7.0.5

参考资料：[http://blog.csdn.net/jerry\_1126/article/details/51868064](http://blog.csdn.net/rheostat/article/details/8191887)



### 1.首先安装anaconda

安装完成后需要在~/.bashrc中配置如下内容, 否则后面编译caffe的make all过程可能会报错
```shell
export ANACONDA_HOME=/home/zanghu/ProgramFiles/software/anaconda2

# added by Anaconda2 installer
export PATH="ANACONDA_HOME/bin:$PATH"

export C_INCLUDE_PATH=$ANACONDA_HOME/include:$C_INCLUDE_PATH
export CPLUS_INCLUDE_PATH=$ANACONDA_HOME/include:$CPLUS_INCLUDE_PATH

export LIBRARY_PATH=$ANACONDA_HOME/lib:$LIBRARY_PATH
export LD_LIBRARY_PATH=$ANACONDA_HOME/lib:$LD_LIBRARY_PATH
```

注意
切勿单独安装或使用apt-get安装opencv, 因为opencv也依赖potocol buffers, 可能与annaconda的peotocolbuffers出现版本冲突, 导致make runtest失败.

### 2.进入caffe官方网站安装说明页：http://caffe.berkeleyvision.org/install_apt.html
需要安装的安装依赖项: 
```shell
sudo apt-get install libleveldb-dev libsnappy-dev libhdf5-serial-dev
```

不能安装的依赖项:
```shell
sudo apt-get install libprotobuf-dev libopencv-dev protobuf-compiler
```

如果没有单独安装boost, 可以考虑用如下方法安装, 如果已经安装则无需再次安装
```shell
sudo apt-get install --no-install-recommends libboost-all-dev
```

### 3.编译caffe

首先拉取git最新版源码
```shell
git clone https://github.com/BVLC/caffe.git
cd caffe
```

其次配置配置文件Makefile.config
```shell

```

再次编译源码和测试用例
```shell
make all # 这里如果使用-j8启用多核编译可能导致出错
make test -j8
```
