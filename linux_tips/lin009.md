## Linux: sudo运行程序搜索路径发生变化的研究

参考资料：[https://unix.stackexchange.com/questions/8646/why-are-path-variables-different-when-running-via-sudo-and-su](https://unix.stackexchange.com/questions/8646/why-are-path-variables-different-when-running-via-sudo-and-su)

### 1.问题描述

在使用docker时，需要安装docker-compose，官方指南要求执行如下命令：

```shell
sudo curl -L https://github.com/docker/compose/releases/download/1.21.2/docker-compose-$(uname -s)-$(uname -m) -o /usr/local/bin/docker-compose
```

然而很不幸返回报错：curl: \(1\) Protocol "https" not supported or disabled in libcurl

![](/assets/lonux009-1.png)

大致意思是目前安装的curl不支持https协议，但是本地安装的curl-7.59.0在bianyishi在编译时已经关联了openssl，理论上不可能出现这种情况。

### 2.原因判定

首先，重新编译安装curl，结果无效，仍然出现之前的错误。

其次，不使用sudo命令，执行
```shell
curl -L https://www.baidu.com/
```
返回正常结果，但是如果在上面的命令前面加上sudo就会报错：curl: \(1\) Protocol "https" not supported or disabled in libcurl


类似的，如果点击：trusty -&gt; 版本代号\(比如16.04的代号是Xenial\)  
同样可以在打开的网页中看到如下四个目录：main restricted universe multiverse

综上，ubuntu的source.list文件中的一行的含义如下

```shell
    参数1      参数2                 参数3                 参数4           参数5         参数6          参数7
<deb还是源码> <网站地址> <dists目录下应该进入的子目录X> <X下目标目录1> <X下目标目录2> <X下目标目录3> <X下目标目录4>
```

### 3.ubuntu源网站

一个不错的源网站：[http://wiki.ubuntu.org.cn/源列表](http://wiki.ubuntu.org.cn/源列表)

里面提供了各个版本ubuntu的source.list的内容，并且有模板。

![](/assets/lin007_01png.png)

